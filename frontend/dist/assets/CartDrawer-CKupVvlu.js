import{u as N,r as n,O as C,U as y,j as s,F as o,R as l,M as D}from"./index-BQlZyj7B.js";const w=()=>{const d=N(),{cart:r,setCart:e,setCartNum:i,getCheckout:u,totalPriceFunction:x,totalPrice:j}=n.useContext(C),{loggedinUser:h}=n.useContext(y),p=()=>{localStorage.removeItem("cart"),i(0),e([])},m=t=>{const c=r.map(a=>{if(a._id===t){const g=Math.max(a.quantity-1,0);return{...a,quantity:g}}return a}).filter(a=>a.quantity>0);e(c),i(c.length),localStorage.setItem("cart",JSON.stringify(c))},v=()=>{h?u():d("/login")};return n.useEffect(()=>{x()},[e]),s.jsx("div",{className:"cartDrawer",children:r.length>0?s.jsxs("div",{className:"cartDrawerDiv",children:[s.jsx("div",{className:"cartDrawerDivTop",children:s.jsxs("button",{onClick:()=>p(),children:[s.jsx(o,{})," Ränsa"]})}),s.jsx("div",{className:"productsInCarList",children:r.map(t=>s.jsxs("div",{className:"productInCart",children:[s.jsx("img",{src:`../../../src/assets/${t.product_image}`,alt:t.product_image}),s.jsxs("div",{className:"productInfo",children:[s.jsx("p",{children:t.product_title}),s.jsxs("div",{className:"productPrice",children:[s.jsxs("p",{children:[t.product_price,",00 SEK"]}),s.jsx("div",{className:"quantity",children:t.quantity})]})]}),s.jsx("div",{className:"productRemove",children:s.jsx(o,{style:{cursor:"pointer"},onClick:()=>m(t._id)})})]},t._id))}),s.jsx("div",{className:"totalPriceDiv",children:s.jsx("div",{className:"totalPrice",children:s.jsxs("p",{children:["Totalt: ",j,",00 SEK"]})})}),s.jsxs("div",{className:"cartDrawerDivBottom",children:[s.jsx(l,{}),s.jsxs("button",{className:"bayBtn",onClick:()=>v(),children:["Gå till betalning",s.jsx(D,{})]})]})]}):s.jsxs("div",{className:"cartEmpty",children:[s.jsx("p",{children:"Kundvagnen är tom"}),s.jsx(l,{})]})})};export{w as default};
